<div class="filter-search">
  <input
    type="text"
    placeholder="Personel Ara..."
    [(ngModel)]="searchText"
    (input)="filterPersonnel()"
  />

  <select [(ngModel)]="selectedDepartment" (change)="filterPersonnel()">
    <option value="">TÃ¼m Departmanlar</option>
    <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
  </select>
</div>

<div class="card-container">
  <!-- ðŸ”¹ ArtÄ±k filteredPersonnel Ã¼zerinden dÃ¶nÃ¼yoruz -->
  <div class="content-card" *ngFor="let person of filteredPersonnel">
    <div class="personnel-image">
      <img [src]="person.personnelphoto" alt="Personnel Photo" />
    </div>
    <div class="personnel-info">
      <h3 class="personnel-name">{{ person.firstName }} {{ person.lastName }}</h3>
      <p class="personnel-title">{{ person.position }}</p>
    </div>
    <div>
      <button class="btn" (click)="openDetails(person)">Daha Fazla</button>
    </div>
  </div>
</div>


<!-- Ekleme Formu -->
<button class="bton" (click)="toggleAddForm()">Yeni Personel Ekle</button>
<div *ngIf="showAddForm" class="person-detail">
  <h2>Yeni Personel</h2>
  <form (ngSubmit)="addPersonnel()">
    <label>Ad:</label>
    <input [(ngModel)]="newPersonnel.firstName" name="firstName" required />
    <label>Soyad:</label>
    <input [(ngModel)]="newPersonnel.lastName" name="lastName" required />
    <label>Tc Kimlik NumarasÄ±:</label>
    <input [(ngModel)]="newPersonnel.tckimlik" name="tckimlik" required />
    <label>DoÄŸum Tarihi:</label>
    <input [(ngModel)]="newPersonnel.dogumtarihi" name="dogumtarihi" type="date" required />
    <label>Telefon NumarasÄ±:</label>
    <input [(ngModel)]="newPersonnel.telno" name="telno" />
    <label>Adres:</label>
    <input [(ngModel)]="newPersonnel.adres" name="adres" />
    <label>Email:</label>
    <input [(ngModel)]="newPersonnel.email" name="email" />
    <label>Pozisyon:</label>
    <input [(ngModel)]="newPersonnel.position" name="position" />
    <label>BÃ¶lÃ¼m:</label>
    <input [(ngModel)]="newPersonnel.department" name="department" />
    <label>BaÅŸlangÄ±Ã§ Tarihi:</label>
    <input [(ngModel)]="newPersonnel.startDate" name="startDate" type="date"/>
    <label> FotoÄŸraf:</label>
    <input type="file" (change)="handleFileInput($event)" required/>

    <div class="butons">
      <button class="persekle" type="submit">Ekle</button>
      <button class="kutukapat" type="button" (click)="toggleAddForm()">Kapat</button>
    </div>
  </form>
</div>

<!-- Arkaplan ve Detay Kutusu -->
<div *ngIf="isCardVisible">
  <div class="modal-backdrop" (click)="closeDetails()"></div>
  <div class="card person-detail">
    <h2>ðŸ‘¤ Personel Bilgileri</h2>
    <p><strong>Ad Soyad:</strong> {{ selectedPersonnel?.firstName }} {{ selectedPersonnel?.lastName }}</p>
    <p><strong>Pozisyon:</strong> {{ selectedPersonnel?.position }}</p>
    <p><strong>Email:</strong> {{ selectedPersonnel?.email }}</p>
    <p><strong>TC Kimlik:</strong> {{selectedPersonnel?.tckimlik}}</p>
    <p><strong>DoÄŸum Tarihi:</strong> {{selectedPersonnel?.dogumtarihi}} </p>
    <p><strong>Telefon NumarasÄ±:</strong> {{selectedPersonnel?.telno}} </p>
    <p><strong>Adres: </strong> {{selectedPersonnel?.adres}} </p>
    <p><strong>Departman: </strong> {{selectedPersonnel?.department}} </p>
    <img [src]="selectedPersonnel?.personnelphoto" alt="Personnel Photo" style="width:150px; height:auto; margin-top:10px;">
    <button class="btn" (click)="deletePersonnel(selectedPersonnel!.id)">Sil</button>
    <button class="close-btn" (click)="closeDetails()">Kapat</button>
  </div>
</div>
